import{_ as a,c as i,o as e,a2 as t}from"./chunks/framework.BYllqQUr.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"doc/ops/K8s.md","filePath":"doc/ops/K8s.md"}'),n={name:"doc/ops/K8s.md"};function l(h,s,p,r,o,k){return e(),i("div",null,[...s[0]||(s[0]=[t(`<h2 id="文档" tabindex="-1">文档 <a class="header-anchor" href="#文档" aria-label="Permalink to &quot;文档&quot;">​</a></h2><p><a href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/sysctl-cluster/" target="_blank" rel="noreferrer">doc</a></p><h2 id="sysctl" tabindex="-1">sysctl <a class="header-anchor" href="#sysctl" aria-label="Permalink to &quot;sysctl&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      securityContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        sysctls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">net.core.somaxconn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1024&#39;</span></span></code></pre></div><h2 id="安装kubectl" tabindex="-1">安装kubectl <a class="header-anchor" href="#安装kubectl" aria-label="Permalink to &quot;安装kubectl&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Lo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    http://kubernetes.oss-cn-hangzhou.aliyuncs.com/kubernetes-release/release/v1.22.1/bin/linux/amd64/kubectl</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a+x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/kubectl</span></span></code></pre></div><h2 id="设置config" tabindex="-1">设置config <a class="header-anchor" href="#设置config" aria-label="Permalink to &quot;设置config&quot;">​</a></h2><ol><li>在 home/kubectl 目录创建 config文件 复制远程k8s集群的api配置</li><li>设置环境变量 <code>export KUBECONFIG=/home/kubectl/config</code></li><li>测试 <code>kubectl get pods -n aed-test</code> (-n 指定namespace)</li></ol><h2 id="新增pod" tabindex="-1">新增pod <a class="header-anchor" href="#新增pod" aria-label="Permalink to &quot;新增pod&quot;">​</a></h2><h2 id="新增service" tabindex="-1">新增service <a class="header-anchor" href="#新增service" aria-label="Permalink to &quot;新增service&quot;">​</a></h2><h2 id="新增ingress" tabindex="-1">新增ingress <a class="header-anchor" href="#新增ingress" aria-label="Permalink to &quot;新增ingress&quot;">​</a></h2><h2 id="更新pod镜像" tabindex="-1">更新pod镜像 <a class="header-anchor" href="#更新pod镜像" aria-label="Permalink to &quot;更新pod镜像&quot;">​</a></h2><p><a href="https://developer.aliyun.com/article/1122230" target="_blank" rel="noreferrer">参考</a></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  deployment/(pod-name)  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -n: 指定namespace</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment/nginx-deployment-basic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx=nginx:1.9.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aed-test</span></span></code></pre></div><h2 id="mini-k8s" tabindex="-1">mini k8s <a class="header-anchor" href="#mini-k8s" aria-label="Permalink to &quot;mini k8s&quot;">​</a></h2><p><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noreferrer">https://minikube.sigs.k8s.io/docs/start/</a></p><blockquote><p>curl -LO <a href="https://storage.googleapis.com/minikube/releases/latest/minikube-latest.x86_64.rpm" target="_blank" rel="noreferrer">https://storage.googleapis.com/minikube/releases/latest/minikube-latest.x86_64.rpm</a></p><p>sudo rpm -Uvh minikube-latest.x86_64.rpm</p></blockquote><blockquote><p>minikube start --force --driver=docker</p></blockquote>`,18)])])}const u=a(n,[["render",l]]);export{d as __pageData,u as default};
